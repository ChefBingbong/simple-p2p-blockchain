# Lefthook configuration for pre-commit hooks
# https://github.com/evilmartians/lefthook

pre-commit:
  parallel: true
  commands:
    # Type checking - run on staged TypeScript files
    type-check:
      run: |
        STAGED_TS=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(ts|tsx)$' || true)
        if [ -n "$STAGED_TS" ]; then
          bun run check
        fi
      glob: "*.{ts,tsx}"
      root: "."

    # Linting - run Biome on staged files
    lint:
      run: bun biome check --write {all_files}
      stage_fixed: true
      glob: "*.{ts,tsx,js,jsx,json}"
      root: "."

    # Format - ensure files are formatted
    format:
      run: bun biome format --write {all_files}
      stage_fixed: true
      glob: "*.{ts,tsx,js,jsx,json}"
      root: "."

